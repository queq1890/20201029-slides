import { Card } from "@fusuma/client";

## 3. å›°ã£ãŸã“ã¨

---

## Chakra UI ã® TypeScript ã®å‹ãŒé–“é•ã£ã¦ã„ã‚‹

<br />
<br />

- Chakra UI ã® component ã¯ `as` prop ã§ã©ã® DOM ã§ render ã™ã‚‹ã‹ã‚’æŒ‡å®šã§ãã‚‹
- `as="a"` ã¨æ›¸ãã¨`<a />` ã¨ã—ã¦ render ã•ã‚Œã‚‹
  - ãŸã ã—ã€`as` ã§æŒ‡å®šã—ãŸè¦ç´ ã® props / attribute ãŒå‹æƒ…å ±ã«å«ã¾ã‚Œã¦ã„ãªã„ãŸã‚ã€TypeScript ã® error ãŒèµ·ãã¦ã—ã¾ã†
  - â†“ ã¯ `href` ãŒ`<Box />` ã® type ã«å­˜åœ¨ã—ã¦ã„ãªã„ã¨æ€’ã‚‰ã‚Œã‚‹ä¾‹

<br />

```js
<Box as="a" href={`#${id}`} />
```

---

### ã¨ã‚Šã‚ãˆãš GitHub ã® Issue ã‚’è¦‹ã«è¡Œã

<br />
<br />

- https://github.com/chakra-ui/chakra-ui/issues/247
- https://github.com/chakra-ui/chakra-ui/issues/906

- æ¬¡ã® major version ã® release ã§ç›´ã‚Šãã†ï¼Ÿ
  - rc ç‰ˆã‚’ install ã—ã¦ä½¿ã†

<br />

```bash
$ yarn add @chakra-ui/core@1.0.0-rc.5
```

---

- æ¬¡ã® version ã‹ã‚‰ Chakra ã® API ãŒã‹ãªã‚Šå¤‰ã‚ã‚Šãã†
  - æ–°ã—ã„ document ã‚’è¦‹ãªãŒã‚‰ migration ã‚’ã™ã‚‹
  - https://next.chakra-ui.com/docs/migration

<br />

=> æ­£ã—ã„å‹å®šç¾©ã§ Chakra ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸ ğŸ‰

---

## å‡ºæ¥ä¸ŠãŒã£ãŸã‚µã‚¤ãƒˆã® perf ãŒãã“ã¾ã§é«˜ããªã„

<Card
  left={
    <>
      index page
      <img src="../../images/React-index.png" />
    </>
  }
  right={
    <>
      post page
      <img src="../../images/React-post.png" />
    </>
  }
/>

<br />
<br />

- lighthouse ã® report ã‚’è¦‹ã‚‹ã¨ã€Total Blocking Time ã® score ãŒä½ã„
  - JavaScript ã®èª­ã¿è¾¼ã¿ã«æ™‚é–“ãŒæ›ã‹ã£ã¦ã„ã‚‹
  - https://web.dev/lighthouse-total-blocking-time/?utm_source=lighthouse&utm_medium=lr

---

## é‡ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è»½ã„ã‚‚ã®ã«å¤‰ãˆã‚Œã°æ”¹å–„ã™ã‚‹ã®ã§ã¯ï¼Ÿ ğŸ¤”

<br />

- ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä¸€ç•ªé‡ã„ã®ã¯ React
- React ã‚’ Preact ã«æ›¸ãæ›ãˆã‚‹

---

## Preact

<br />

<Card
  left={
    <>
      <img src="../../images/preact.jpg" />
    </>
  }
  right={
    <ul>
      <li>React ã¨ã»ã¼åŒã˜API ã‚’æä¾›ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li>
      <li>
        bundle size ãŒå°ã•ã„
        <ul>
          <li>ç´„20 kB</li>
          <li>React + React-DOM ã¯åˆè¨ˆç´„120 kb</li>
        </ul>
      </li>
      <li>Next.js ã¨ä¸€ç·’ã«ä½¿ã†ã“ã¨ãŒã§ãã‚‹</li>
    </ul>
  }
/>

---

### å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

<br />

```bash
$ yarn addã€€preact preact-render-to-string
```

---

### Alias ã‚’è²¼ã‚‹

<br />

- npm install æ™‚ã« package åã« alias ã‚’è²¼ã‚‹ã“ã¨ãŒã§ãã‚‹ ([å‚è€ƒ](https://github.com/npm/rfcs/blob/latest/implemented/0001-package-aliases.md#detailed-explanation))
  - `react` ã¨ã„ã†åå‰ã§`preact/compat` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹
  - alias ã‚’è²¼ã‚ŠãªãŒã‚‰ React ã‚’ Preact ã«ç½®ãæ›ãˆã‚‹ã“ã¨ã§ã€React ã«ä¾å­˜ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æŒ™å‹•ãŒå£Šã‚Œãªã„

<br />

```bash
$ yarn add react@npm:@preact/compat@^0.0.3
```

---

### Webpack ã®è¨­å®šã‚’ã„ã˜ã‚‹

<br />

- (çœç•¥ã—ã¾ã™)
- æ°—ã«ãªã‚‹æ–¹ã¯[ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ](https://github.com/queq1890/shuho/pull/41)ã‚’è¦‹ã¦ãã ã•ã„

---

### ç½®ãæ›ãˆãŸçµæœ

<br />

<Card
  left={
    <>
      index page
      <img src="../../images/Preact-index.png" />
    </>
  }
  right={
    <>
      post page
      <img src="../../images/Preact-post.png" />
    </>
  }
/>

=> ã¾ã ã¾ã æ”¹å–„ã®ä½™åœ°ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ãƒã‚·ã«ãªã£ãŸ ğŸ¥³
